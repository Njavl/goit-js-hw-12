{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '54431760-457b05627b7c92a0f6d8a1d9a';\nconst url = 'https://pixabay.com/api';\n\nexport default async function getImagesByQuery(query, page) {\n  const option = {\n    method: 'GET',\n    url: url,\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    },\n  };\n\n  try {\n    const response = await axios(option);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n/** @type {HTMLUListElement} */\nconst gallery = document.querySelector('.gallery');\n\nconst loader = document.querySelector('.loader');\n\n/** @type {HTMLButtonElement}  */\nconst loadMoreBtn = document.querySelector('.load-more');\n\nexport function createGallery(images) {\n  const markup = images.map(image => {\n    const {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = image;\n\n    return `\n    <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n    class=\"gallery-image\"\n    src=\"${webformatURL}\"\n    alt=\"${tags}\"\n    />\n        <div class=\"description\">\n      <ul class=\"description-list\">\n        <li class=\"description-list-item\">\n          <span class=\"description-label\">Likes</span>\n          <span class=\"description-label-value\">${likes}</span>\n        </li>\n        <li class=\"description-list-item\">\n          <span class=\"description-label\">Views</span>\n          <span class=\"description-label-value\">${views}</span>\n        </li>\n        <li class=\"description-list-item\">\n          <span class=\"description-label\">Comments</span>\n          <span class=\"description-label-value\">${comments}</span>\n        </li>\n        <li class=\"description-list-item\">\n          <span class=\"description-label\">Downloads</span>\n          <span class=\"description-label-value\">${downloads}</span>\n        </li>\n      </ul>\n    </div>\n    </a>\n    </li>\n    `;\n  });\n\n  gallery.insertAdjacentHTML('beforeend', markup.join(''));\n\n  const modal = new SimpleLightbox(`.gallery li a`, {\n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n  });\n\n  const imageToScrole = document.querySelector(\n    `img[src=\"${images[0].webformatURL}\"]`\n  );\n  const position = imageToScrole.getBoundingClientRect();\n  window.scrollBy({\n    top: position.y - 20,\n    behavior: 'smooth',\n  });\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove('visually-hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('visually-hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('visually-hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('visually-hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport getImagesByQuery from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  hideLoader,\n  showLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions.js';\n\n/** @type {HTMLFormElement}  */\nconst form = document.querySelector('.form');\n/** @type {HTMLButtonElement}  */\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet searchBy = '';\nlet page = 1;\n\nform.addEventListener('submit', searchImg);\nloadMoreBtn.addEventListener('click', loadMore);\n\nasync function searchImg(event) {\n  event.preventDefault();\n\n  searchBy = form.elements['search-text'].value.trim();\n  page = 1;\n\n  if (searchBy === '') {\n    iziToast.error({\n      title: 'Empty field',\n      message: 'Please enter a value before submitting.',\n    });\n    return;\n  }\n\n  clearGallery();\n  showLoader();\n  hideLoadMoreButton();\n\n  try {\n    const data = await getImagesByQuery(searchBy);\n    console.log(data);\n\n    if (data.hits.length === 0) {\n      hideLoader();\n      iziToast.error({\n        title: 'Nothing found',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n\n    hideLoader();\n    createGallery(data.hits);\n\n    checkForEnd(data);\n  } catch (errorMessage) {\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: `${errorMessage}`,\n    });\n  }\n}\n\nasync function loadMore(event) {\n  page += 1;\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(searchBy, page);\n    console.log(data);\n\n    hideLoader();\n    createGallery(data.hits);\n\n    checkForEnd(data);\n  } catch (errorMessage) {\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: `${errorMessage}`,\n    });\n  }\n}\n\nfunction checkForEnd(data) {\n  if (page >= Math.ceil(data.totalHits / 15)) {\n    hideLoadMoreButton();\n    iziToast.warning({\n      title: 'No more results',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    showLoadMoreButton();\n  }\n}\n"],"names":["API_KEY","url","getImagesByQuery","query","page","option","axios","error","gallery","loader","loadMoreBtn","createGallery","images","markup","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","position","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","searchBy","searchImg","loadMore","event","iziToast","data","checkForEnd","errorMessage"],"mappings":"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"}